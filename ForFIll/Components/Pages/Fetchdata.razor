@page "/fetchdata"


@using MudBlazor
@using ForFIll.Models;
@using System.Collections.Generic;
@using System.Net.Http;
@using System.Net.Http.Json;
@using System.Threading.Tasks;
@using ForFIll.Data
@using System.ComponentModel.DataAnnotations
@inject IDialogService DialogService

@using ForFIll.Controllers
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
@using System.Text.RegularExpressions
@using ForFIll.Services.Interfaces
@inject IProductService ProductServiceI
@inject ProductService ProductService






@inject ISnackbar Snackbar
@inject NavigationManager NavigationManager

@using Microsoft.AspNetCore.Authorization


@using ForFIll.Models

<h3>Data</h3>

<ul>
    @foreach (var item in products)
    {
        <li>@item.Name</li>
        <li>@item.Price</li>
        <li>@item.Category</li>
        
    }
</ul>

@code {
    // private List<Product> data;
    // private List<Product> data;
  
    public IEnumerable<Product> products = new List<Product>();


    protected override async Task OnInitializedAsync()
    {
        // data = await ProductServiceI
        var request = await ProductServiceI.GetAllProductsAsync();
        if(request.Success)
        {
            products = request.Data!;
        }  
          

    }
    // var request = await ProductService.GetAllProductsAsync();
    // if(request.Success)
    // {
    //     products = request.Data!;
    // }

    // filteredProducts = products;
}
